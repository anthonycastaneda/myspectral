<!DOCTYPE HTML>

<html lang="en">
	<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	  <title>Entra ID</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="referrer" content="origin">

	

    <meta name="description" content="Anthony, Not Tony">
    
    <meta name="generator" content="Hugo 0.145.0">

    
<link rel="stylesheet" href="/css/main.min.09224b467f2c555409865abcdf41f1274d28443d62fe5328ebcd73347b9dd264ae5252ade861e8ea1e4e114804b96f4720a7117f83b8e24922fd71f04afbbb08.css" integrity="sha512-CSJLRn8sVVQJhlq830HxJ00oRD1i/lMo681zNHud0mSuUlKt6GHo6h5OEUgEuW9HIKcRf4O44kki/XHwSvu7CA==">


<noscript><link rel="stylesheet" href="/css/noscript.min.e6f1ba19697eecfddfbf83ff7181b98181998f163d7005f6ae923451556bf85bef357f43dffe1522b92c1efab7fb38441f479e39b7a03e4313a8ef12b0b01f65.css" integrity="sha512-5vG6GWl&#43;7P3fv4P/cYG5gYGZjxY9cAX2rpI0UVVr&#43;FvvNX9D3/4VIrksHvq3&#43;zhEH0eeObegPkMTqO8SsLAfZQ=="></noscript>



<link rel="stylesheet" href="/css/custom.min.a8f5d26aac2b59cf74fb412f3b2296e7c0975cf4538ef3c46ad2e36e94d1ba672f75942cefc41cc70d8bbb395bccc729fbe19667e0074a2e821eb297c7092566.css" integrity="sha512-qPXSaqwrWc90&#43;0EvOyKW58CXXPRTjvPEatLjbpTRumcvdZQs78Qcxw2LuzlbzMcp&#43;&#43;GWZ&#43;AHSi6CHrKXxwklZg==">




    
    
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:1313/img/drums.png">
  <meta name="twitter:title" content="Entra ID">
  <meta name="twitter:description" content="ChatGPT creates documentation">

    <meta property="og:url" content="http://localhost:1313/posts/entra/">
  <meta property="og:site_name" content="Anthony">
  <meta property="og:title" content="Entra ID">
  <meta property="og:description" content="ChatGPT creates documentation">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-03-23T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-03-23T00:00:00+00:00">
    <meta property="article:tag" content="Blog">
    <meta property="article:tag" content="Chatgpt">
    <meta property="og:image" content="http://localhost:1313/img/drums.png">

    
	</head>
	<body class="landing is-preload">

		
			<div id="page-wrapper">

				
          <header id="header">
            <h1><a href="http://localhost:1313/">Anthony</a></h1>
						<nav id="nav">
							<ul>
								<li class="special">
                  <a href="#menu" class="menuToggle" aria-label='Menu'><span>Menu</span></a>
									<div id="menu">
										<ul>
				              
				              <li><a href="/">Home</a></li>
				              
				              <li><a href="/posts/">Posts</a></li>
				              
										</ul>
									</div>
								</li>
							</ul>
						</nav>
					</header>

<article id="main">
  <header >
    <h2>Entra ID</h2>
    
	</header>
	<section class="wrapper style5">
		<div class="inner">
      <h2 id="entra-powershell">Entra PowerShell</h2>
<p>To work with Enterprise Applications in Azure using PowerShell, particularly for Entra ID (previously Azure AD), you&rsquo;ll typically use the <strong>AzureAD</strong> or <strong>Microsoft.Graph</strong> module for interacting with these resources. Below is an example of a PowerShell script that demonstrates how to interact with an <strong>Enterprise Application</strong> in Entra ID using the <strong>Microsoft.Graph</strong> module.</p>
<h3 id="prerequisites">Prerequisites</h3>
<ol>
<li>
<p><strong>Microsoft.Graph PowerShell Module</strong>: If you don&rsquo;t have it installed, use the following to install it:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span>Install-Module Microsoft.Graph -Scope CurrentUser
</span></span></code></pre></div></li>
<li>
<p><strong>Login</strong>: You&rsquo;ll need to authenticate with your Azure tenant. If you&rsquo;re using multi-tenant authentication, you may need admin consent for specific actions.</p>
</li>
</ol>
<hr>
<h3 id="example-script-for-managing-enterprise-applications">Example Script for Managing Enterprise Applications</h3>
<p>This script will cover basic tasks, such as:</p>
<ol>
<li>Logging in to Azure.</li>
<li>Fetching a list of Enterprise Applications.</li>
<li>Assigning roles or permissions to the app.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-powershell" data-lang="powershell"><span style="display:flex;"><span><span style="color:#75715e"># Connect to Microsoft Graph</span>
</span></span><span style="display:flex;"><span>Connect-MgGraph -Scopes <span style="color:#e6db74">&#34;Application.ReadWrite.All&#34;</span>, <span style="color:#e6db74">&#34;Directory.ReadWrite.All&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Get all Enterprise Applications</span>
</span></span><span style="display:flex;"><span>$enterpriseApps = Get-MgServicePrincipal
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Display list of Enterprise Applications (Service Principals)</span>
</span></span><span style="display:flex;"><span>$enterpriseApps | Select DisplayName, AppId, Id
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example: Get details of a specific Enterprise Application by AppId</span>
</span></span><span style="display:flex;"><span>$appId = <span style="color:#e6db74">&#34;your-app-id-here&#34;</span>  <span style="color:#75715e"># Replace with your Enterprise Application&#39;s AppId</span>
</span></span><span style="display:flex;"><span>$enterpriseApp = Get-MgServicePrincipal -ServicePrincipalId $appId
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Display details of the specific Enterprise Application</span>
</span></span><span style="display:flex;"><span>$enterpriseApp | Format-List DisplayName, AppId, Id, Description, AppRoleAssignedTo
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example: Assign a role to the Enterprise Application</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># First, find the role you want to assign</span>
</span></span><span style="display:flex;"><span>$roles = Get-MgServicePrincipalAppRoleAssignedTo -ServicePrincipalId $enterpriseApp.Id
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Display available roles</span>
</span></span><span style="display:flex;"><span>$roles | Select AppRoleId, PrincipalDisplayName, ResourceDisplayName
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Assign role (if necessary)</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Example: You&#39;d assign a role like this (adjust based on your needs):</span>
</span></span><span style="display:flex;"><span>$roleId = <span style="color:#e6db74">&#34;role-id&#34;</span>  <span style="color:#75715e"># Replace with actual role ID</span>
</span></span><span style="display:flex;"><span>$resourceId = <span style="color:#e6db74">&#34;resource-id&#34;</span>  <span style="color:#75715e"># Replace with resource (service) ID</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>New-MgServicePrincipalAppRoleAssignment -ServicePrincipalId $enterpriseApp.Id -AppRoleId $roleId -ResourceId $resourceId
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Write-Host <span style="color:#e6db74">&#34;Role Assigned Successfully!&#34;</span>
</span></span></code></pre></div><hr>
<h3 id="key-concepts">Key Concepts</h3>
<ul>
<li><strong>Service Principal</strong>: This represents the application&rsquo;s identity in Azure AD.</li>
<li><strong>App Roles</strong>: These are permissions or roles assigned to an application, and the <code>AppRoleAssignedTo</code> refers to which roles are assigned.</li>
<li><strong>Get-MgServicePrincipal</strong>: Retrieves a list of service principals (Enterprise Applications).</li>
<li><strong>New-MgServicePrincipalAppRoleAssignment</strong>: Assigns an app role to a service principal.</li>
</ul>
<hr>
<h3 id="more-advanced-operations-you-can-perform">More advanced operations you can perform</h3>
<ul>
<li><strong>Assigning users to an Enterprise Application</strong>: Use <code>Add-MgUserToGroup</code> or <code>Add-MgServicePrincipalOwner</code> if you&rsquo;re adding a user to the application or managing permissions.</li>
<li><strong>Deleting an Enterprise Application</strong>: Use <code>Remove-MgServicePrincipal</code>.</li>
</ul>
<hr>

		</div>
	</section>
</article>

<footer id="footer">
  <ul class="icons">
    
    
    
    <li><a href="https://github.com/anthonycastaneda" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
    
    
    
    <li><a href="https://youtube.com/@TacoAnthony" class="icon brands fa-youtube"><span class="label">GitHub</span></a></li>
    
    
    
    
    <li><a href="mailto:anthony@anthonycastaneda.com" class="icon solid fa-envelope"><span class="label">Email</span></a></li>
    
    
    <li><a href="tel:1%20512%20555%205555" class="icon solid fa-phone"><span class="label">Phone</span></a></li>
    

  </ul>
  <ul class="copyright">
    <li>&copy; 2025 Anthony Castañeda</li>
  </ul>
</footer>

</div>











<script src="/js/bundle.min.935254271ae3006602cb92b38ba70062a462cefc8d3aa575338369d256bb8422a69fc18f64450e74b7e6c240b20a252f522f3b9f323294bdf9ed466f5fb28ee9.js" integrity="sha512-k1JUJxrjAGYCy5Kzi6cAYqRizvyNOqV1M4Np0la7hCKmn8GPZEUOdLfmwkCyCiUvUi87nzIylL357UZvX7KO6Q=="></script>


</body>

</html>
